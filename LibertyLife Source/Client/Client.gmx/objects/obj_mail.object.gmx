<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_mail</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-15</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha=0
open=0
mode=0
mail=0
con=0

name=''
text=''
item=''
cost=0
_cost=''
t_check=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if place_meeting(x,y,system.chr_target)
{
if keyboard_check_pressed(vk_down)
{
open=1
}

}else{open=0}


t_check=1






if open=0
{
name=''
text=''
item=''
cost=0
}

if open=1
{
open=2
sk_message_save(0,0)
sk_message_sadd(simple_int,1,24)
sk_message_sadd(simple_string,1,system.name)
sk_message_send()
}

if open=2
{
system.mail_check=id


var mx,my,dx,dy,i;
mx=mouse_x
my=mouse_y
dx=view_xview+320-96
dy=view_yview+240-88

if mode=0
{
for(i=0;i&lt;10;i+=1)
{
if mx&gt;dx and mx&lt;dx+64 and my&gt;dy+16+16*i and my&lt;dy+32+16*i
{
mail=i
mode=0
name=system.mail_name[mail]
text=system.mail_text[mail]
item=system.mail_item[mail]
cost=system.mail_cost[mail]
break
}
}
}

if mx&gt;dx+160 and mx&lt;dx+160+32 and my&gt;dy+160 and my&lt;dy+176 and mouse_check_button_pressed(mb_left) and t_check=1 and mode=0
{
mode=1
t_check=0
name=''
text=''
item=''
cost=0
}
if mx&gt;dx+160 and mx&lt;dx+160+32 and my&gt;dy+160 and my&lt;dy+176 and mouse_check_button_pressed(mb_left) and t_check=1 and mode=1
{
mode=0
t_check=0
name=''
text=''
if item!=''{item_add(item)}
item=''
cost=0
}

if mode=0
{
if mouse_check_button_pressed(mb_left)
{
if mx&gt;dx+96 and mx&lt;dx+128 and my&gt;dy+160 and my&lt;dy+176 and name!=''
{
con=1
t_check=0
}
if mx&gt;dx+128 and mx&lt;dx+160 and my&gt;dy+160 and my&lt;dy+176
{
con=2
t_check=0
}
}

switch(con)
{
case 1:
item_add(item)
item_money_add(cost)

sk_message_save(0,0)
sk_message_sadd(simple_int,2,28,mail)
sk_message_sadd(simple_string,1,system.name)
sk_message_send()

sk_message_save(0,0)
sk_message_sadd(simple_int,1,24)
sk_message_sadd(simple_string,1,system.name)
sk_message_send()

name=''
text=''
item=''
cost=0
con=0
break
case 2:
mode=1
t_check=0
text=''
item=''
cost=0
con=0
break
}
}

if mode=1
{
if mouse_check_button_pressed(mb_left)
{
if mx&gt;dx+96 and mx&lt;dx+192 and my&gt;dy+16 and my&lt;dy+32 and con!=3
{
con=1
keyboard_string=name
kor_set_kor_eng(kdll_kor)
t_check=0
}
if mx&gt;dx+64 and mx&lt;dx+192 and my&gt;dy+32 and my&lt;dy+144 and con!=3
{
con=2
keyboard_string=text
kor_set_kor_eng(kdll_kor)
t_check=0
}
if mx&gt;dx+128 and mx&lt;dx+192 and my&gt;dy+144 and my&lt;dy+160
{
con=3
keyboard_string=string(cost)
if cost=0{keyboard_string=''}
t_check=0
}
if mx&gt;dx+96 and mx&lt;dx+128 and my&gt;dy+160 and my&lt;dy+178 and con!=3
{
con=4
}
if mx&gt;dx+128 and mx&lt;dx+160 and my&gt;dy+160 and my&lt;dy+178
{
name=''
text=''
if item!=''{item_add(item)}
item=''
cost=0
//con=4
}
}

switch(con)
{
case 1:
name=keyboard_string+kor_get_koring()
if keyboard_check_pressed(vk_enter) or(t_check!=0 and mouse_check_button_pressed(mb_left))
{
kor_set_kor_eng(kdll_eng)
con=0
}
break
case 2:
text=keyboard_string+kor_get_koring()
if keyboard_check_pressed(vk_enter) or(t_check!=0 and mouse_check_button_pressed(mb_left))
{
kor_set_kor_eng(kdll_eng)
con=0
}
break
case 3:
_cost=keyboard_string+kor_get_koring()
if keyboard_check_pressed(vk_enter) or(t_check!=0 and mouse_check_button_pressed(mb_left))
{
for(i=0;i&lt;string_length(_cost);i+=1)
{
var num;
num=ord(string_char_at(_cost,i))
if num&lt;48 or num&gt;57{_cost='0' break}
}
cost=min(real(_cost),item_money_out(inven.money))
con=0
}
break
case 4:
sk_message_save(0,0)
sk_message_sadd(simple_int,2,26,cost)
sk_message_sadd(simple_string,4,system.name,name,text,item)
sk_message_send()
name=''
text=''
item=''
item_money_add(-cost)
cost=0
con=0
break
}
}

kor_backspace()

if keyboard_check_pressed(vk_escape)
{
if mode=1
{
item_add(item)
item=''
}
open=0
}

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if open=2
{

var dx,dy;
dx=view_xview+320-96
dy=view_yview+240-88
draw_sprite(spr_inter_mail,0+system.option_interface_color*3,dx,dy)

draw_sprite(spr_inter_mail,1+mode+system.option_interface_color*3,dx,dy)

sex_set_font(12)
var i;
for(i=0;i&lt;10;i+=1)
{
sex_draw_text(dx+4,dy+18+16*i,system.mail_name[i])
}

var __name,__text,__cost;
__name=name
__text=text
__cost=string(cost)
if cost=0{__cost=''}

if con=3{__cost=_cost}

if (system.t mod 30)&lt;15
{
switch(con)
{
case 1: __name+='|' break
case 2: __text+='|' break
case 3: __cost+='|' break
}
}


sex_draw_text(dx+98,dy+18,__name)
sex_set_maxline(120)
sex_draw_text(dx+66,dy+34,__text)
draw_item(item,dx+64,dy+144,1,-1)
sex_draw_text(dx+130,dy+146,__cost)

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
